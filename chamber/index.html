<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Chamber Home Page">
  <meta name="author" content="Nyasha Chimutapira">
  <title>Gweru Chamber of Commerce Home Page</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nova+Cut&family=Sunflower:wght@300&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/normalize.css">
  <link rel="stylesheet" href="styles/index.css">
  <link rel="icon" href="favicon.ico">
  <meta property="og:title" content="Chamber Directory Page">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://nyashachimutapira.github.io/wdd231/images/chamber_logo.webp">
  <meta property="og:url" content="https://nyashachimutapira.github.io/wdd231/chamber/directory">
  <script src="scripts/date.js" defer></script>
  <script src="scripts/navigation.js" defer></script>
  <script src="scripts/showcase.js" defer></script>
  <script src="scripts/weather.js" defer></script>
  <script src="scripts/forecast.js" defer></script>
  <style>
      .chamber-title {
          font-family: 'Sunflower', sans-serif;
          font-size: 2em;
          color: #faf1f1;
      }
      .member-card {
          background: rgba(255, 255, 255, 0.9);
          border-radius: 8px;
          padding: 15px;
          margin: 10px;
          text-align: center;
      }
      .member-card img {
          width: 100%;
          height: auto;
          border-radius: 8px;
      }
  </style>
</head>
<body>
  <header>
    <div class="header-content">
      <img src="images/chamber.jpg" alt="Idaho Chamber Logo">
      <span class="chamber-title">
        Gweru <br>
        Chamber of Commerce
      </span>
    </div>
    <nav aria-label="Main Navigation">
      <ul class="navigation">
        <li><a href="index.html" title="Home">Home</a></li>
        <li><a href="directory.html" title="Directory">Directory</a></li>
        <li><a href="join.html" title="Join">Join</a></li>
        <li><a href="discover.html" target="_blank" title="Discover">Discover</a></li>
      </ul>
    </nav> 
  </header>

  <main>
    <h1>Home</h1>
    <img id="hero-img" src="images/hero-image.jpg" alt="Gweru, Idaho Neighborhood">
    <div class="cta-join-button">
      <button>Join Chamber of Commerce</button>
    </div>
    
    <div id="members"></div>
  </main>
  
  <footer>
    <div class="coc-contact">
      <p class="mcoc-bold">Gweru Chamber of Commerce</p>
      <p>123 Main Street, Gweru, Zimbabwe</p>
      <p>+263 77 386 7878</p>
      <p>chimutapiran@gmail.com</p>
    </div>
    <div class="socials">
      <a href="https://twitter.com/" target="_blank">
        <img src="images/xlogo.png" alt="Idaho Chamber X Logo Link">
      </a>
      <a href="https://www.facebook.com/" target="_blank">
        <img src="images/facebook.svg" alt="Idaho Chamber Facebook Logo Link">
      </a>
      <a href="https://www.linkedin.com/" target="_blank">
        <img src="images/linkedin.svg" alt="Idaho Chamber LinkedIn Logo Link">
      </a>
      <a href="https://telegram.org/" target="_blank">
        <img src="images/telegram.jpg" alt="Idaho Chamber Telegram Logo Link">
      </a>
    </div>
    <div class="bq-copyright">
      <p>&copy; <span id="currentyear"></span> Nyasha Chimutapira, WDD 231</p>
      <p id="lastModified"></p>
    </div>
  </footer>  

  <script>
    const membersContainer = document.querySelector("#members");
    const url = "data/members.json";

    async function getMembers() {
      try {
        const response = await fetch(url);
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        const data = await response.json();
        displayMembers(data.slice(0, 3)); // Display only the first 3 members
      } catch (error) {
        console.error('Error fetching member data:', error);
      }
    }

    const displayMembers = (companies) => {
      companies.forEach(company => {
        let card = document.createElement("section");
        card.classList.add("member-card");
        
        let name = document.createElement("h2");
        let image = document.createElement("img");
        let address = document.createElement("p");
        let phone = document.createElement("p");
        let website = document.createElement("a");
        let membershipLevel = document.createElement("p");

        name.textContent = company.name;
        address.textContent = company.address;
        phone.textContent = company.phone;

        website.href = company.website;
        website.textContent = "Website";
        website.target = "_blank";

        membershipLevel.textContent = `Membership: ${company.membership_level === 3 ? "Gold" : company.membership_level === 2 ? "Silver" : "Member"}`;

        image.setAttribute("src", company.image);
        image.setAttribute("alt", `Logo of ${company.name}`);
        image.setAttribute("loading", "lazy");
        image.setAttribute("width", "auto");
        image.setAttribute("height", "100");

        card.appendChild(image);
        card.appendChild(name);
        card.appendChild(address);
        card.appendChild(phone);
        card.appendChild(website);
        card.appendChild(membershipLevel);

        membersContainer.appendChild(card);
      });
    };

    getMembers();
  </script>
</body>
</html>